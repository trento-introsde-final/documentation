Web Services
==========================

Process Centric Services
-------------------------
* **initializeUser** {Params: validation_code}: Given a validation_code generated by the system, fetches the user information from strava and performs the 1-to-1 mapping from telegram user-strava user.
* **checkGoalStatus** {Params: user_id}: Given a user_id checks the user’s progress with regards to his goals.
* **updateRunInfo** {Params: user_id}: Given a user_id fetches new runs from Strava and checks if any goals are met.

Business Logic Services
-------------------------

* **GET** ``/goal-types/<goal-type>``
* **GET** ``/goal-types/<goal-type>``
* **GET** ``/user-id/<telegram-id>``
* **GET** ``/users`` {Params: validation_code}
* **GET** ``/users/<user-id>/goal-status``
* **POST** ``/users`` {Params: validation_code, strava_auth_code}
* **PUT** ``/users/<user-id>`` {telegram_user_id, telegram_chat_id}


Storage Services
------------------

* **GET** ``/goal-types``
* **GET** ``/goal-types/<goal-type>``
* **POST** ``/users`` {Params: validation_code, strava_auth_code}
* **GET** ``/users`` {Params: validation_code}: Connects to AdapterServices and retrieves the user data from Strava.
* **PUT** ``/users/<user-id>`` {Params: telegram_user_id, telegram_chat_id}
* **GET** ``/user-id/<telegram-id>``
* **GET** ``/users/<user-id>/runs`` {Params: startDate, endDate}: Connects to LocalDatabaseService and gets all user’s runs within [startDate, endDate].
* **GET** ``/users/<user-id>/new-runs`` {Params: startDate}: Connects to LocalDatabaseService to fetch access_token, then fetches latest runs from Strava through the AdapterService, and returns the untracked runs in case there are any.
* **POST** ``/users/<user-id>/runs``:
* **GET** ``/users/<user-id>/goals``: Connects to LocalDatabaseService and gets all the goals for the user. 
* **PUT** ``/users/<id>/goal/<goal-type> ``
* **GET** ``/pretty-pic``: connects to the adapterServices and returns 1 picture url.
* **GET** ``/motivation-quote``: connects to the adapterServices and returns 1 motivation quote.

Local Database Services
-----------------------

* **POST** ``/users`` {Params: validation_code, strava_auth_code}
* **GET** ``/users`` {Params: validation_code}
* **PUT** ``/users/<user_id>``
* **PUT** ``/users/<user_id>`` {telegram_user_id,  telegram_chat_id}

* **GET** ``/goal-types``
* **GET** ``/goal-types/<goal-type>``
* **GET** ``/user-id/<telegram-id>``
* **PUT** ``/users/<user-id>/goals/<goal-type>`` {value}

* **GET** ``/user/<user-id>/goals``
* **GET** ``/user/<user-id>/runs``

* **GET** ``/user/<user-id>/access-token``
* **POST** ``/user/<user-id>/runs``



Adapter Services
-----------------

* **GET** ``/instagram-pics``: Connects to instagram and gets latest pics that match a tag name.
* **GET** ``/motivation-quote``: Gets a random inspirational quote.
* **GET** ``/strava-user-data/<code>``: Connects to Strava, through a POST request to retrieve the user access token, and the user profile. Returns it.
* **GET** ``/recent-runs/<accessToken>`` {startDate}: Connects, and gets latest run information.


